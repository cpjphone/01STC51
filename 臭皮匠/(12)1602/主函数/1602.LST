C51 COMPILER V9.01   1602                                                                  07/05/2013 20:45:22 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE 1602
OBJECT MODULE PLACED IN 1602.OBJ
COMPILER INVOKED BY: D:\(3)keil4\C51\BIN\C51.EXE 1602.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /****************************************************************************/
   2          #include<reg52.h>                     //定义头文件
   3          #define uchar unsigned char       //宏定义
   4          #define uint  unsigned int
   5          
   6          sbit RS = P2^6;                                                        
   7          sbit RW = P2^5;                                                        
   8          sbit EN = P2^7;
   9          /*************************************************/
  10          //延时函数：功能是带有入口参数的延时函数，单位约1毫秒
  11          /*************************************************/
  12          void delayms(int m)
  13          {
  14   1              int i,j;
  15   1              for(i=0;i<m;i++)
  16   1              {
  17   2                      for(j=0;j<123;j++)
  18   2                      {}
  19   2              }
  20   1      }
  21          
  22          /**************************************************/
  23          //写指令
  24          /**************************************************/
  25          void write_com(uchar com)
  26          {
  27   1              RW = 0;                 //RW为低电平时，1062处于写状态
  28   1              RS = 0;                 //RS为低电平时，写命令
  29   1              delayms(1);             //稍作延时
  30   1              P0 = com;               //把命令放在数据传送端
  31   1              EN = 1;                 //使1602处于有效状态
  32   1              delayms(1);             //稍作延时
  33   1              EN =0;                  //使EN处于下降沿
  34   1      }
  35          
  36          /**************************************************/
  37          //写数据
  38          /**************************************************/
  39          void write_data(uchar dat)
  40          {
  41   1              RW = 0;                 //RW为低电平时，1062处于写状态
  42   1              RS = 1;                 //RS为高电平时，写数据
  43   1              delayms(1);             //稍作延时
  44   1              P0 = dat;               //把数据放在数据传送端
  45   1              EN = 1;                 //使1602处于有效状态
  46   1              delayms(1);             //稍作延时
  47   1              EN =0;                  //使EN处于下降沿        
  48   1      }
  49          
  50          /**************************************************/
  51          //液晶字符显示的位置
  52          /**************************************************/
  53          void gotoXY(uchar x,uchar y)   //x为显示指针的位置，即为各行的第几个位置；Y选行。
  54          {
  55   1              if(y == 0)
C51 COMPILER V9.01   1602                                                                  07/05/2013 20:45:22 PAGE 2   

  56   1              write_com(x + 0x80);
  57   1              if(y == 1)
  58   1              write_com(x + 0x40 + 0x80);
  59   1      }
  60          /**************************************************/
  61          //初始化
  62          /**************************************************/
  63          void init()
  64          {
  65   1              EN = 0;
  66   1              write_com(0x38);        //显示模式设定
  67   1              write_com(0x0f);    //开关显示、光标有无设置、光标闪烁设置
  68   1              write_com(0x06);    //写一个字符后指针加一
  69   1              write_com(0x01);        //清屏指令
  70   1      }
  71          /**************************************************/
  72          //主函数
  73          /**************************************************/
  74          void main()
  75          {
  76   1              init();
  77   1              gotoXY(0,0);
  78   1              write_data('8');
  79   1              while(1)
  80   1              {
  81   2      
  82   2              }
  83   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    141    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
